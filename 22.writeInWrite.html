<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>writeInWrite</title>
</head>
<body>
<script>
		// Создаём глобальную переменную
		globalThis.i = 0;

		// Создаем шаблон для вставки
		const docWriteTpl = `<script>
			try{
				globalThis.i++;
				document.write(writeInWrite());
			}catch(e){
				console.log(globalThis.i, e.name)
			}
		<\/script>`;

		function writeInWrite() {
			// Вставляем шаблон
			document.write(docWriteTpl)
		}

		// Вызываем функцию
		writeInWrite();
</script>
</body>
</html>